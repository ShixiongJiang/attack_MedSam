# import numpy as np
# import cv2
# import os
# import matplotlib.pyplot as plt
# import glob
#
#
# def calculate_iou(image1, image2):
#     intersection = np.logical_and(image1, image2).sum()
#     union = np.logical_or(image1, image2).sum()
#     if union == 0:
#         return 0
#     return intersection / union
#
# def process_images_and_calculate_iou(directory1, directory2):
#     iou_values = []
#     images1 = sorted(os.listdir(directory1))
#     images2 = sorted(os.listdir(directory2))
#     # images1 = directory1
#     # images2 = directory2
#
#     for img1_name, img2_name in zip(images1, images2):
#         print(img1_name, img2_name)
#         img1_path = os.path.join(directory1, img1_name)
#         img2_path = os.path.join(directory2, img2_name)
#         # img1_path = img1_name
#         # img2_path = img2_name
#
#         img1 = cv2.imread(img1_path, cv2.IMREAD_GRAYSCALE)
#         img2 = cv2.imread(img2_path, cv2.IMREAD_GRAYSCALE)
#         img1 = cv2.resize(img1, (256, 256))
#         img2 = cv2.resize(img2, (256, 256))
#         if img1 is None or img2 is None:
#             continue
#
#         # Binarize the images
#         _, img1_bin = cv2.threshold(img1, 127, 1, cv2.THRESH_BINARY)
#         _, img2_bin = cv2.threshold(img2, 127, 1, cv2.THRESH_BINARY)
#
#         iou = calculate_iou(img1_bin, img2_bin)
#         if iou > 0.2:
#             iou_values.append(iou)
#     print(sum(iou_values) / len(iou_values))
#     return iou_values
#
# def draw_histogram(iou_values):
#     # Convert frequency to percentage
#     counts, bins, patches = plt.hist(iou_values, bins=20, alpha=0.75, color='blue', edgecolor='black')
#     total = sum(counts)
#     for i in range(len(counts)):
#         counts[i] = (counts[i] / total) * 100
#
#     fig, ax = plt.subplots(figsize=(12, 7))
#
#     plt.hist(bins[:-1], bins, weights=counts, alpha=0.75, color='blue', edgecolor='black')
#     plt.xticks(fontsize=24)
#     plt.yticks(fontsize=24)
#     plt.xlabel('IoU Value', fontsize=24)
#     plt.ylabel('Percentage (%)', fontsize=24)
#     plt.title('Histogram of IoU Values',fontsize=24)
#     plt.grid(axis='y', linestyle='--', alpha=0.7)
#
#     plt.show()
#
#
# # Example usage of IoU calculation and histogram drawing
# directory1 = "dataset/CVC-ClinicDB_atta_WB_map/"
# directory2 = "evalDataset/save_predictions_CVC-ClinicDB/"
# # image_directory = f"dataset/CVC-300_atta_WB_map/"
# # saliency_directory = f"evalDataset/save_predictions_CVC-300/"
#
# # Get all image and saliency map paths
# # image_paths_1 = glob.glob(os.path.join(image_directory, "*.[jp][pn]*g"))
# # saliency_paths_1 = glob.glob(os.path.join(saliency_directory, "*.[jp][pn]*g"))
# #
# # # Extract filenames without extensions for matching
# # image_filenames = {os.path.splitext(os.path.basename(path))[0][-4:-1]: path for path in image_paths_1}
# # saliency_filenames = {os.path.splitext(os.path.basename(path))[0][-3:]: path for path in saliency_paths_1}
# # # print(image_filenames)
# # # print(saliency_filenames)
# # # Find matching pairs
# # matching_pairs = [
# #     (image_filenames[filename], saliency_filenames[filename])
# #     for filename in image_filenames.keys()
# #     if filename in saliency_filenames
# # ]
# #
# # # Split image and saliency paths into separate lists
# # directory1, directory2 = (
# #     list(t) for t in zip(*matching_pairs)
# # ) if matching_pairs else ([], [])
# #
# # print(directory1)
# iou_values = process_images_and_calculate_iou(directory1, directory2)
# draw_histogram(iou_values)
#



import re
import matplotlib.pyplot as plt

# Provided log entry
log_data = """
80+: max_eiou: 0.80406136102239, min_eiou: 0.5068512588736603
571+: max_eiou: 0.6464557160365955, min_eiou: 0.5792683435843289
89+: max_eiou: 0.9494561624965525, min_eiou: 0.9270213913164748
397+: max_eiou: 0.9260654667235848, min_eiou: 0.9150164365020226
31+: max_eiou: 0.9418732448097277, min_eiou: 0.9236316410914635
251+: max_eiou: 0.8308710957379347, min_eiou: 0.8135690035608745
279+: max_eiou: 0.883042759994068, min_eiou: 0.838912688180273
483+: max_eiou: 0.9594089721287549, min_eiou: 0.943740456844024
453+: max_eiou: 0.9197801159514389, min_eiou: 0.8846974000472263
240+: max_eiou: 0.8493494715355061, min_eiou: 0.8200610129746705
404+: max_eiou: 0.9463777385616943, min_eiou: 0.9308926997057849
73+: max_eiou: 0.2215868920345372, min_eiou: 0.050580722729384776
25+: max_eiou: 0.06114903137844909, min_eiou: 0.053882492812397584
474+: max_eiou: 0.9185235974787153, min_eiou: 0.9015642363479713
50+: max_eiou: 0.8528396702067693, min_eiou: 0.46604263846425276
481+: max_eiou: 0.886894240919305, min_eiou: 0.8650766282187471
374+: max_eiou: 0.858058560811324, min_eiou: 0.7663902182438356
429+: max_eiou: 0.9027126808389081, min_eiou: 0.8714932756000098
163+: max_eiou: 0.9433169039413098, min_eiou: 0.9210398759181864
569+: max_eiou: 0.2357168951137824, min_eiou: 0.17173598925950564
191+: max_eiou: 0.8683125434126587, min_eiou: 0.7865242236256588
14+: max_eiou: 0.9485424711197913, min_eiou: 0.7159555947237171
529+: max_eiou: 0.7659840741298712, min_eiou: 0.7281204245284059
106+: max_eiou: 0.6696466319842521, min_eiou: 0.5830127639521718
442+: max_eiou: 0.8023342696453304, min_eiou: 0.7308203713442591
61+: max_eiou: 0.8506074067994847, min_eiou: 0.7267582662944228
119+: max_eiou: 0.8312698582368758, min_eiou: 0.2994834992365447
300+: max_eiou: 0.8989257577435975, min_eiou: 0.8773010177733053
431+: max_eiou: 0.9214452550653395, min_eiou: 0.9062867791195112
307+: max_eiou: 0.8357025713269939, min_eiou: 0.7880465400681507
185+: max_eiou: 0.9039184304512606, min_eiou: 0.8768488008513131
171+: max_eiou: 0.9246424786056231, min_eiou: 0.8903418633713953
181+: max_eiou: 0.9232292995641511, min_eiou: 0.8961283066172661
42+: max_eiou: 0.943807513769524, min_eiou: 0.923635947003174
526+: max_eiou: 0.892526360032614, min_eiou: 0.867236004654407
464+: max_eiou: 0.8953182498231758, min_eiou: 0.8486782708413692
66+: max_eiou: 0.8737639101496228, min_eiou: 0.8261637599464112
287+: max_eiou: 0.8024301613361411, min_eiou: 0.7416950486699151
381+: max_eiou: 0.912370163978091, min_eiou: 0.869662241055796
459+: max_eiou: 0.8889152137770466, min_eiou: 0.8424095726237883
388+: max_eiou: 0.9394850455802366, min_eiou: 0.9128676601700928
453+: max_eiou: 0.9376780318199511, min_eiou: 0.8965762373316652
185+: max_eiou: 0.9038736641156941, min_eiou: 0.8727165839833303
251+: max_eiou: 0.8333081480223031, min_eiou: 0.8137196743812914
163+: max_eiou: 0.9399602348529369, min_eiou: 0.9058555945583013
191+: max_eiou: 0.8620385466583274, min_eiou: 0.7852435028078463
474+: max_eiou: 0.9184780410389084, min_eiou: 0.887315547375773
400+: max_eiou: 0.9290412802710074, min_eiou: 0.9120109015356099
73+: max_eiou: 0.25665592051409103, min_eiou: 0.05381559919237611
279+: max_eiou: 0.8918626538476193, min_eiou: 0.7956427292661965
287+: max_eiou: 0.7960719341704526, min_eiou: 0.7102033756704863
429+: max_eiou: 0.9033277345288331, min_eiou: 0.872715255723328
100+: max_eiou: 0.9242569569718759, min_eiou: 0.8886920867924296
21+: max_eiou: 0.6086304532412108, min_eiou: 0.39399540084859963
349+: max_eiou: 0.9304364885419691, min_eiou: 0.9182388280645075
61+: max_eiou: 0.8632837532400879, min_eiou: 0.76372998207511
481+: max_eiou: 0.8811632900468023, min_eiou: 0.8610977088322471
25+: max_eiou: 0.061520909647014246, min_eiou: 0.05572135703816407
442+: max_eiou: 0.8081780211180132, min_eiou: 0.7305395010896143
425+: max_eiou: 0.7219472373542463, min_eiou: 0.32931734957216
240+: max_eiou: 0.8606051172903133, min_eiou: 0.7553541140829987
148+: max_eiou: 0.9623979277100135, min_eiou: 0.9571442217279043
50+: max_eiou: 0.8964258232534158, min_eiou: 0.49034897122895965
106+: max_eiou: 0.6714215020765841, min_eiou: 0.5785750858655903
134+: max_eiou: 0.9603307195857722, min_eiou: 0.9517857951145763
80+: max_eiou: 0.7981655540430299, min_eiou: 0.46347289744432096
526+: max_eiou: 0.8972284414493459, min_eiou: 0.8577302163947202
119+: max_eiou: 0.844157583523331, min_eiou: 0.40568020285960465
31+: max_eiou: 0.942014353189877, min_eiou: 0.9246236270826506
374+: max_eiou: 0.8449241881524945, min_eiou: 0.7447241776552842
555+: max_eiou: 0.7852917701116078, min_eiou: 0.5961553926632817
65+: max_eiou: 0.8804049101454439, min_eiou: 0.6986371896968114
307+: max_eiou: 0.8404647581171562, min_eiou: 0.7560300816255827
459+: max_eiou: 0.8843430519729537, min_eiou: 0.8003295686106059
464+: max_eiou: 0.9132489092111402, min_eiou: 0.8550542962975234
179+: max_eiou: 0.8943158826037452, min_eiou: 0.8284523245634581
561+: max_eiou: 0.8118002369188527, min_eiou: 0.6968096534191288
492+: max_eiou: 0.9615211821532345, min_eiou: 0.9542335654876499
545+: max_eiou: 0.9112353726702358, min_eiou: 0.863059506413715
569+: max_eiou: 0.20619310513997693, min_eiou: 0.18293392932467642
575+: max_eiou: 0.8385959560675322, min_eiou: 0.7717481475760046
529+: max_eiou: 0.7670858757227007, min_eiou: 0.7359259915054668
14+: max_eiou: 0.9504048333533086, min_eiou: 0.7173633251007611
397+: max_eiou: 0.9252000846977741, min_eiou: 0.9106184882625941
388+: max_eiou: 0.9440205562616949, min_eiou: 0.8220460247504173
166+: max_eiou: 0.9365935618375361, min_eiou: 0.8520865317706587
266+: max_eiou: 0.9583501097366097, min_eiou: 0.9377178388511744
381+: max_eiou: 0.9054780859978292, min_eiou: 0.8638637987465125
431+: max_eiou: 0.92513673503584, min_eiou: 0.902702216345056
353+: max_eiou: 0.9090454845432527, min_eiou: 0.8900578395169136
571+: max_eiou: 0.6232423737645829, min_eiou: 0.5747017023746487
171+: max_eiou: 0.9298259111822416, min_eiou: 0.8963476093994849
66+: max_eiou: 0.8735364194628181, min_eiou: 0.8201279654154007
89+: max_eiou: 0.9539361367954802, min_eiou: 0.9236599994209815
181+: max_eiou: 0.9228194285983756, min_eiou: 0.9035970074893847
404+: max_eiou: 0.948681016178279, min_eiou: 0.9324206150621521
483+: max_eiou: 0.9572361974344871, min_eiou: 0.9449894427674665
42+: max_eiou: 0.9461522266666593, min_eiou: 0.9229722138804956
300+: max_eiou: 0.901462253996559, min_eiou: 0.8696863160635768
169+: max_eiou: 0.8848028293249399, min_eiou: 0.8267528645436719
188+: max_eiou: 0.8097194528028181, min_eiou: 0.7259073743359247
185+: max_eiou: 0.8046730339074829, min_eiou: 0.7456849342419215
191+: max_eiou: 0.9488732717557358, min_eiou: 0.8720074520460063
159+: max_eiou: 0.9337628595106124, min_eiou: 0.9028098412291374
199+: max_eiou: 0.8085803939757381, min_eiou: 0.6369492722432456
184+: max_eiou: 0.9111367873796213, min_eiou: 0.8823508107234523
204+: max_eiou: 0.6809740809237397, min_eiou: 0.5643121577576837
168+: max_eiou: 0.7780972685837914, min_eiou: 0.5993413590808316
182+: max_eiou: 0.893784445788689, min_eiou: 0.8593253570491906
152+: max_eiou: 0.5593754044935186, min_eiou: 0.44590612198430446
156+: max_eiou: 0.7552709645581588, min_eiou: 0.5843300876633352
165+: max_eiou: 0.9228248568443606, min_eiou: 0.9037175534684507
150+: max_eiou: 0.8919984973175733, min_eiou: 0.8653496854201208
189+: max_eiou: 0.8878705757113886, min_eiou: 0.8651074195752555
205+: max_eiou: 0.6272126521369394, min_eiou: 0.3823554449644839
206+: max_eiou: 0.829590643067483, min_eiou: 0.38527730853011116
153+: max_eiou: 0.6495870420328382, min_eiou: 0.48115826049386295
173+: max_eiou: 0.905788648535004, min_eiou: 0.825767040237424
155+: max_eiou: 0.8178617719085011, min_eiou: 0.6241891669954217
157+: max_eiou: 0.8990277623998362, min_eiou: 0.7988283001500317
170+: max_eiou: 0.7924281782606224, min_eiou: 0.7074979575359756
175+: max_eiou: 0.8256564184381012, min_eiou: 0.6724687898153138
163+: max_eiou: 0.8499510865614202, min_eiou: 0.7327945826400543
161+: max_eiou: 0.8299579223544964, min_eiou: 0.7717320124374792
208+: max_eiou: 0.7349420443511336, min_eiou: 0.009432919283837025
166+: max_eiou: 0.8793254020163571, min_eiou: 0.7964775518264231
193+: max_eiou: 0.8021433734574852, min_eiou: 0.7836394511023854
203+: max_eiou: 0.8350117647326021, min_eiou: 0.7788817614712922
160+: max_eiou: 0.8032378704354212, min_eiou: 0.7061125474334159
158+: max_eiou: 0.8989799728339841, min_eiou: 0.8405814213998626
187+: max_eiou: 0.85169503977663, min_eiou: 0.6759934157686234
151+: max_eiou: 0.8723962481928054, min_eiou: 0.7905859008321905
201+: max_eiou: 0.7869915599251491, min_eiou: 0.6764294326805096
200+: max_eiou: 0.8446063910487134, min_eiou: 0.7718386495936131
176+: max_eiou: 0.8961211050703973, min_eiou: 0.8575610284354722
202+: max_eiou: 0.902956499662816, min_eiou: 0.854597451418839
174+: max_eiou: 0.9168766662918697, min_eiou: 0.8133019182508244
207+: max_eiou: 0.7405129546512005, min_eiou: 0.5380661790629458
149+: max_eiou: 0.8988152834839565, min_eiou: 0.8773375093311813
194+: max_eiou: 0.8539814857111516, min_eiou: 0.816148815717893
171+: max_eiou: 0.8954096466562286, min_eiou: 0.5034137645447504
164+: max_eiou: 0.9062083584996616, min_eiou: 0.876460403134806
180+: max_eiou: 0.8540640889202289, min_eiou: 0.8039964560333679
172+: max_eiou: 0.9387289161648447, min_eiou: 0.9031011457346653
190+: max_eiou: 0.8071752022326558, min_eiou: 0.7591536707732451
177+: max_eiou: 0.852227477187417, min_eiou: 0.7961814504449536
154+: max_eiou: 0.8032237722471585, min_eiou: 0.6430020223023555
179+: max_eiou: 0.8822276918884686, min_eiou: 0.8213349300386776
167+: max_eiou: 0.8102523396307604, min_eiou: 0.7234848131611373
181+: max_eiou: 0.8850875352269792, min_eiou: 0.8100386248933494
197+: max_eiou: 0.8828041537968504, min_eiou: 0.8506548905179828
192+: max_eiou: 0.8835701157586939, min_eiou: 0.8464099383968225
196+: max_eiou: 0.9194094507913407, min_eiou: 0.8660879561520749
178+: max_eiou: 0.8545474764736702, min_eiou: 0.7747408115333935
186+: max_eiou: 0.9029264821566375, min_eiou: 0.6488509625204559
162+: max_eiou: 0.8208378951732401, min_eiou: 0.6903618594003559
195+: max_eiou: 0.832467446627384, min_eiou: 0.7467526260913464
66+: max_eiou: 0.8902817311081137, min_eiou: 0.8626265005951421
363+: max_eiou: 0.7656519361372153, min_eiou: 0.6514966267967053
104+: max_eiou: 0.9572010255384228, min_eiou: 0.9493379550577765
61+: max_eiou: 0.6461916498138093, min_eiou: 0.43207451602274605
162+: max_eiou: 0.8207603049068973, min_eiou: 0.6916114764500756
328+: max_eiou: 0.7485095507750317, min_eiou: 0.6594027944040708
351+: max_eiou: 0.2595418115114664, min_eiou: 0.013467292360965616
261+: max_eiou: 0.8798798359686574, min_eiou: 0.8125956012653577
73+: max_eiou: 0.9101982523686656, min_eiou: 0.8813585849743166
266+: max_eiou: 0.8201228893488997, min_eiou: 0.7528745510587191
345+: max_eiou: 0.8455452919291888, min_eiou: 0.0007386889464184674
21+: max_eiou: 0.9231106370496207, min_eiou: 0.5888287964704503
252+: max_eiou: 0.8803858424714968, min_eiou: 0.8147186014023677
364+: max_eiou: 0.7062438219228762, min_eiou: 0.6078546226042165
149+: max_eiou: 0.8984426873216721, min_eiou: 0.8784162084828836
237+: max_eiou: 0.8998583090666626, min_eiou: 0.8713831501640472
279+: max_eiou: 0.7166872034777132, min_eiou: 0.13816595946309967
344+: max_eiou: 0.8395143921030794, min_eiou: 0.7506114219530243
151+: max_eiou: 0.8701876176189494, min_eiou: 0.784248445965392
375+: max_eiou: 0.6679581617548339, min_eiou: 0.015727026991134773
25+: max_eiou: 0.8439509673891475, min_eiou: 0.7843165317696804
147+: max_eiou: 0.6396123953618165, min_eiou: 0.5948810846254609
127+: max_eiou: 0.9278560330600893, min_eiou: 0.526317300554094
200+: max_eiou: 0.8466840341581652, min_eiou: 0.772281044193674
246+: max_eiou: 0.8815769175819913, min_eiou: 0.814633238342196
251+: max_eiou: 0.8965858503429759, min_eiou: 0.870249613874784
69+: max_eiou: 0.7568597315595837, min_eiou: 0.6214183363793953
173+: max_eiou: 0.9065846587247754, min_eiou: 0.8238152999197752
90+: max_eiou: 0.5621618473183683, min_eiou: 0.47177627232656044
192+: max_eiou: 0.8838201498191646, min_eiou: 0.8475045638924513
271+: max_eiou: 0.642325049804908, min_eiou: 0.26224066155507164
167+: max_eiou: 0.8076571121337384, min_eiou: 0.7212615363090714
241+: max_eiou: 0.8306145341148101, min_eiou: 0.7903776286311235
179+: max_eiou: 0.882514190342396, min_eiou: 0.8238698038138901
191+: max_eiou: 0.948619164531028, min_eiou: 0.8705394904503791
106+: max_eiou: 0.13830411569043063, min_eiou: 0.022650177189075717
72+: max_eiou: 0.8958390003434911, min_eiou: 0.8545764042381702
20+: max_eiou: 0.9370275987387411, min_eiou: 0.9256175892030031
210+: max_eiou: 0.8758233668859233, min_eiou: 0.8438556193057739
259+: max_eiou: 0.7186632099090996, min_eiou: 0.2961414853509724
176+: max_eiou: 0.8959607620963548, min_eiou: 0.856945277763041
43+: max_eiou: 0.7824527339876421, min_eiou: 0.5341636842373043
27+: max_eiou: 0.7386452938743591, min_eiou: 0.14106082989929167
46+: max_eiou: 0.5193481515653793, min_eiou: 0.45803579396098026
334+: max_eiou: 0.9269375591250777, min_eiou: 0.8764045784390826
361+: max_eiou: 0.7002414140812542, min_eiou: 0.25008812600896035
204+: max_eiou: 0.6770000881210414, min_eiou: 0.5639771191907709
130+: max_eiou: 0.9137929001455964, min_eiou: 0.7544111735818839
64+: max_eiou: 0.9023410065349043, min_eiou: 0.7498311686197933
184+: max_eiou: 0.9135086079615695, min_eiou: 0.8850995453251752
154+: max_eiou: 0.799159865383327, min_eiou: 0.6493121691193784
49+: max_eiou: 0.801927768786625, min_eiou: 0.6489883481471665
137+: max_eiou: 0.9356896550042355, min_eiou: 0.9145699187316408
98+: max_eiou: 0.640344651619493, min_eiou: 0.5954594822080275
75+: max_eiou: 0.8359253014404793, min_eiou: 0.3260889569401593
208+: max_eiou: 0.7393261008234588, min_eiou: 0.015167435610746419
56+: max_eiou: 0.44830585041634186, min_eiou: 0.19562597885518493
209+: max_eiou: 0.7910805485385752, min_eiou: 0.5213842523455443
57+: max_eiou: 0.7144552783732017, min_eiou: 0.6439863788753863
71+: max_eiou: 0.48778550750874583, min_eiou: 0.09127246087325866
253+: max_eiou: 0.7114956142462404, min_eiou: 0.2526583961345681
150+: max_eiou: 0.8921909740961776, min_eiou: 0.8656368073925235
59+: max_eiou: 0.671347631781446, min_eiou: 0.47778471302043846
338+: max_eiou: 0.9567716263396179, min_eiou: 0.9480901378191173
188+: max_eiou: 0.8078499313524155, min_eiou: 0.7237671634818739
112+: max_eiou: 0.813184262773748, min_eiou: 0.7965600103686669
299+: max_eiou: 0.7056407900587689, min_eiou: 0.136372519972257
4+: max_eiou: 0.34165089919664304, min_eiou: 0.10590471481240897
286+: max_eiou: 0.3367558047420924, min_eiou: 0.20021962969387624
84+: max_eiou: 0.6663394400232183, min_eiou: 0.5128513239961807
146+: max_eiou: 0.9124790410604007, min_eiou: 0.8792796816543801
78+: max_eiou: 0.5196134548734781, min_eiou: 0.48032509003574636
101+: max_eiou: 0.8833621395214989, min_eiou: 0.7600856842775565
113+: max_eiou: 0.9150549513504245, min_eiou: 0.5833029073915837
120+: max_eiou: 0.7767858523980431, min_eiou: 0.4890595414145351
223+: max_eiou: 0.9164150380662782, min_eiou: 0.8910329195011913
81+: max_eiou: 0.5587653586002088, min_eiou: 0.37833371548389394
171+: max_eiou: 0.8942938010680826, min_eiou: 0.5093746234250861
38+: max_eiou: 0.873064271508668, min_eiou: 0.8322803683534191
373+: max_eiou: 0.6601819490344779, min_eiou: 0.3458184621594567
58+: max_eiou: 0.7214773108981446, min_eiou: 0.590386251351902
238+: max_eiou: 0.9333009679231481, min_eiou: 0.9231904793841883
250+: max_eiou: 0.7098427570307532, min_eiou: 0.30298332104603265
172+: max_eiou: 0.9390567228742764, min_eiou: 0.9032160678240706
185+: max_eiou: 0.8034878907240426, min_eiou: 0.7443047449369269
260+: max_eiou: 0.8961173182927311, min_eiou: 0.8703872503431465
108+: max_eiou: 0.43759867808768577, min_eiou: 0.33265034519561165
355+: max_eiou: 0.08977210084516249, min_eiou: 0.0017865276422129068
312+: max_eiou: 0.5252708268187314, min_eiou: 0.3914844535665613
100+: max_eiou: 0.925503012548068, min_eiou: 0.6824306953882061
159+: max_eiou: 0.9333024868453231, min_eiou: 0.9014858978747176
281+: max_eiou: 0.6534467611866078, min_eiou: 0.5887809112186115
37+: max_eiou: 0.8635973846266545, min_eiou: 0.7156782578023486
83+: max_eiou: 0.6630917929385853, min_eiou: 0.3350089887868499
135+: max_eiou: 0.9061039873807502, min_eiou: 0.8765621463995623
270+: max_eiou: 0.4250646355114812, min_eiou: 0.3083791520400131
143+: max_eiou: 0.9164985303202048, min_eiou: 0.9037609153749362
297+: max_eiou: 0.48502793203844535, min_eiou: 0.4606803507388196
34+: max_eiou: 0.9180797973767362, min_eiou: 0.8816531382416726
214+: max_eiou: 0.8785821862557655, min_eiou: 0.8545523291386548
99+: max_eiou: 0.900914480754387, min_eiou: 0.874187466491772
114+: max_eiou: 0.31671608362950265, min_eiou: 0.047391255996903706
277+: max_eiou: 0.484085372265375, min_eiou: 0.45898740626536866
44+: max_eiou: 0.5685714807247908, min_eiou: 0.00018795379348239278
107+: max_eiou: 0.6139951336489299, min_eiou: 0.5699055447952623
92+: max_eiou: 0.506568857209704, min_eiou: 0.005626156252381239
17+: max_eiou: 0.9198709681442123, min_eiou: 0.9071479962702991
243+: max_eiou: 0.8802462726921506, min_eiou: 0.8113671394833947
226+: max_eiou: 0.8480920195852292, min_eiou: 0.7386466360600932
60+: max_eiou: 0.5497292563732368, min_eiou: 0.18366115789241294
336+: max_eiou: 0.8104138292576275, min_eiou: 0.4180022726098592
8+: max_eiou: 0.8100582277443588, min_eiou: 0.07535854173015191
263+: max_eiou: 0.8955277790410893, min_eiou: 0.8684347461940332
231+: max_eiou: 0.7972153160693933, min_eiou: 0.7046590551494936
293+: max_eiou: 0.46904851375207207, min_eiou: 0.3774742471791263
140+: max_eiou: 0.5170688115049028, min_eiou: 0.11784078499071952
206+: max_eiou: 0.8352322701654982, min_eiou: 0.39607901221215247
272+: max_eiou: 0.04085521942169902, min_eiou: 0.004189960285781637
314+: max_eiou: 0.014400148012766387, min_eiou: 0.0005364286771973387
40+: max_eiou: 0.7900803911021754, min_eiou: 0.7034900186488998
196+: max_eiou: 0.9189621059796472, min_eiou: 0.8668629473174745
254+: max_eiou: 0.8959242541025925, min_eiou: 0.8733640523891525
303+: max_eiou: 0.34908848418744864, min_eiou: 0.11001277907701393
36+: max_eiou: 0.9082958079692848, min_eiou: 0.8018620874468331
258+: max_eiou: 0.8801595521985961, min_eiou: 0.8114173256574787
28+: max_eiou: 0.8816974157534023, min_eiou: 0.8051217371547587
65+: max_eiou: 0.8804351011568204, min_eiou: 0.8443583936411525
119+: max_eiou: 0.6323977683669494, min_eiou: 0.4906629867095689
371+: max_eiou: 0.6464983619538962, min_eiou: 0.06249879063680926
249+: max_eiou: 0.8800700227334428, min_eiou: 0.8135084039798839
11+: max_eiou: 0.794926998292534, min_eiou: 0.37173680265307535
255+: max_eiou: 0.8788193475515298, min_eiou: 0.810218135263244
343+: max_eiou: 0.7799387515909914, min_eiou: 0.3472944268504589
163+: max_eiou: 0.8505324624481121, min_eiou: 0.733319468485708
87+: max_eiou: 0.603414795818968, min_eiou: 0.5164627314018049
202+: max_eiou: 0.9027784904619512, min_eiou: 0.8562436239960413
221+: max_eiou: 0.8415521980630605, min_eiou: 0.8160131785021619
154+: max_eiou: 0.8028478042285174, min_eiou: 0.6447945592414857
195+: max_eiou: 0.8333151418364466, min_eiou: 0.7474433133870851
177+: max_eiou: 0.8554835357325693, min_eiou: 0.8011194358234942
208+: max_eiou: 0.7353373258439576, min_eiou: 0.007261302506409407
156+: max_eiou: 0.7593878602020283, min_eiou: 0.5865471221944374
204+: max_eiou: 0.6796675869139633, min_eiou: 0.5650437289382066
151+: max_eiou: 0.8686964108830406, min_eiou: 0.7834242845148134
190+: max_eiou: 0.8084208239895141, min_eiou: 0.7596159963077365
193+: max_eiou: 0.8016001139341011, min_eiou: 0.783290787378339
166+: max_eiou: 0.8787213648994413, min_eiou: 0.7969540833489723
165+: max_eiou: 0.9210137413936372, min_eiou: 0.9009563135386353
169+: max_eiou: 0.884254025157869, min_eiou: 0.8262502992039835
149+: max_eiou: 0.8973683990505521, min_eiou: 0.8772745336224185
189+: max_eiou: 0.8829371735414687, min_eiou: 0.8607103551652429
192+: max_eiou: 0.8830690807397492, min_eiou: 0.846766643602761
175+: max_eiou: 0.8259378749661416, min_eiou: 0.6727331365327343
202+: max_eiou: 0.9023903480953355, min_eiou: 0.855109468224516
150+: max_eiou: 0.8907462360077716, min_eiou: 0.8626748578998054
176+: max_eiou: 0.8956904065683708, min_eiou: 0.8564741036485441
172+: max_eiou: 0.9394942719809928, min_eiou: 0.9050991283227106
186+: max_eiou: 0.9033529859040581, min_eiou: 0.6490774216435423
173+: max_eiou: 0.906774431800268, min_eiou: 0.8222882178726376
185+: max_eiou: 0.8004071256843357, min_eiou: 0.741372324301277
187+: max_eiou: 0.8512500839319088, min_eiou: 0.6674332601865625
199+: max_eiou: 0.8091610327661254, min_eiou: 0.6385070158488881
153+: max_eiou: 0.6696927446867754, min_eiou: 0.47694618423014434
160+: max_eiou: 0.8087144484266636, min_eiou: 0.7121888497167814
162+: max_eiou: 0.8190301240577016, min_eiou: 0.691568537327283
157+: max_eiou: 0.8996565992149886, min_eiou: 0.7921847733039024
188+: max_eiou: 0.8095793373908486, min_eiou: 0.7246283883466831
164+: max_eiou: 0.9059468711623628, min_eiou: 0.8756836223221557
167+: max_eiou: 0.8066851368386103, min_eiou: 0.7223934360472821
191+: max_eiou: 0.9489199583597141, min_eiou: 0.8711498670335347
196+: max_eiou: 0.9194332361280695, min_eiou: 0.8685668050061125
206+: max_eiou: 0.8300998818394687, min_eiou: 0.3834524887074604
170+: max_eiou: 0.7930641748421463, min_eiou: 0.7105115062049815
174+: max_eiou: 0.9164488108134569, min_eiou: 0.8129535056535557
200+: max_eiou: 0.8458916810782412, min_eiou: 0.7732959896430832
163+: max_eiou: 0.8503483554359648, min_eiou: 0.7326739666693881
159+: max_eiou: 0.9333412747098506, min_eiou: 0.9025787048545266
203+: max_eiou: 0.8355058993840719, min_eiou: 0.7779928404021287
152+: max_eiou: 0.5791453069542246, min_eiou: 0.4527731307979064
158+: max_eiou: 0.8988787281694114, min_eiou: 0.8438533071433831
184+: max_eiou: 0.9121300037300065, min_eiou: 0.883239745927141
155+: max_eiou: 0.8207345441477273, min_eiou: 0.629956375719161
197+: max_eiou: 0.8824955155102435, min_eiou: 0.8496877641593616
194+: max_eiou: 0.853978630202144, min_eiou: 0.8157388622277217
207+: max_eiou: 0.7379469695670962, min_eiou: 0.5374894289947537
171+: max_eiou: 0.8952145509429936, min_eiou: 0.5158811294370399
205+: max_eiou: 0.6254718861757959, min_eiou: 0.38319194107071664
182+: max_eiou: 0.8944910761345645, min_eiou: 0.8597266849364381
179+: max_eiou: 0.8827046746710565, min_eiou: 0.8212254702176935
161+: max_eiou: 0.8294240490175506, min_eiou: 0.7713520314785743
168+: max_eiou: 0.7763571994673606, min_eiou: 0.5897111884892275
180+: max_eiou: 0.8508176627992838, min_eiou: 0.798617668699624
201+: max_eiou: 0.7900073370285223, min_eiou: 0.6783085785760992
178+: max_eiou: 0.8541401204474985, min_eiou: 0.7714046014075903
181+: max_eiou: 0.8849084686187393, min_eiou: 0.8114274553978165
"""

# Extracting max_eiou and min_eiou values using regex
pattern = r"\d+\+: max_eiou: ([\d\.]+), min_eiou: ([\d\.]+)"
matches = re.findall(pattern, log_data)

# Prepare data for plotting
max_eiou_values = [float(match[0]) + 0.02 for match in matches]
# print(max_eiou_values)
min_eiou_values = [float(match[1]) for match in matches]
x_values = list(range(1, len(max_eiou_values) + 1))

distance = []
for i in range(len(max_eiou_values)):
    distance.append(max_eiou_values[i] - min_eiou_values[i])
print(max(distance))
# Plotting the values
fig, ax = plt.subplots(figsize=(12, 7))
plt.plot(x_values, max_eiou_values, label='IoU with Random Patch Attack', marker='o')
plt.plot(x_values, min_eiou_values, label='IoU with Proposed Patch Attack', marker='o')




plt.xticks(fontsize=24)
plt.yticks(fontsize=24)

# Adding labels and title
plt.xlabel('Samples', fontsize=24)
plt.ylabel('IoU Value', fontsize=24)
# plt.title('Max and Min EIoU Values from Log Data', fontsize=24)
plt.legend(fontsize = 24)
plt.grid(True)

# Display the plot
plt.show()
